<template>
  <div>
    <div class="relative">
      <div class="long">
        <nuxt-img loading="lazy" :src="preview" class="w-full" />
      </div>
      <button @click="openModal" class="w-[90%] flex justify-between items-center py-[16px] px-[24px] absolute bottom-0 left-[5%] bottom-10">
        Пациент 1.
        <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 56 56" fill="none">
          <circle cx="28" cy="28" r="28" transform="rotate(-90 28 28)" fill="white"/>
          <path d="M15.2322 18.2849C15.2322 15.5572 16.3379 12.9412 18.3061 11.0124C20.2743 9.08359 22.9437 8 25.7272 8C28.5106 8 31.18 9.08359 33.1482 11.0124C35.1164 12.9412 36.2221 15.5572 36.2221 18.2849C36.2221 18.4798 36.1431 18.6666 36.0025 18.8044C35.862 18.9422 35.6713 19.0196 35.4725 19.0196C35.2737 19.0196 35.083 18.9422 34.9424 18.8044C34.8018 18.6666 34.7228 18.4798 34.7228 18.2849C34.7228 15.9469 33.7751 13.7046 32.0881 12.0513C30.401 10.3981 28.113 9.46927 25.7272 9.46927C23.3414 9.46927 21.0533 10.3981 19.3663 12.0513C17.6793 13.7046 16.7315 15.9469 16.7315 18.2849C16.7315 18.4798 16.6525 18.6666 16.5119 18.8044C16.3714 18.9422 16.1807 19.0196 15.9819 19.0196C15.783 19.0196 15.5924 18.9422 15.4518 18.8044C15.3112 18.6666 15.2322 18.4798 15.2322 18.2849ZM40.7199 27.1006C39.6067 27.0992 38.5329 27.5046 37.7083 28.2374C37.6443 27.4175 37.3476 26.6314 36.8517 25.9681C36.3558 25.3048 35.6804 24.7907 34.9019 24.4838C34.1234 24.177 33.2728 24.0897 32.4464 24.2317C31.6199 24.3738 30.8504 24.7396 30.225 25.2878V18.2849C30.225 17.1159 29.7511 15.9947 28.9076 15.1681C28.0641 14.3415 26.9201 13.8771 25.7272 13.8771C24.5343 13.8771 23.3902 14.3415 22.5467 15.1681C21.7032 15.9947 21.2293 17.1159 21.2293 18.2849V35.5489L19.1191 32.232C18.5068 31.2491 17.5264 30.5401 16.3875 30.2565C15.2486 29.973 14.0416 30.1375 13.0249 30.7149C12.0082 31.2923 11.2625 32.2366 10.9472 33.346C10.6319 34.4553 10.7721 35.6415 11.3378 36.6508L16.8327 45.8338C16.9398 45.986 17.1015 46.0931 17.2856 46.1336C17.4697 46.1742 17.6626 46.1452 17.8259 46.0524C17.9891 45.9597 18.1107 45.81 18.1663 45.6333C18.2219 45.4566 18.2074 45.2659 18.1258 45.0992L12.6328 35.9162C12.2352 35.2411 12.1275 34.4388 12.3335 33.6859C12.5394 32.933 13.0422 32.2911 13.7311 31.9014C14.42 31.5117 15.2386 31.4062 16.0069 31.608C16.7752 31.8099 17.4302 32.3025 17.8278 32.9777L17.841 32.9997L21.3418 38.5095C21.4278 38.6454 21.5567 38.7502 21.7089 38.8078C21.8612 38.8654 22.0285 38.8728 22.1854 38.8287C22.3423 38.7847 22.4803 38.6916 22.5783 38.5637C22.6764 38.4358 22.7291 38.2801 22.7286 38.1201V18.2849C22.7286 17.5056 23.0445 16.7581 23.6069 16.207C24.1692 15.656 24.9319 15.3464 25.7272 15.3464C26.5224 15.3464 27.2851 15.656 27.8475 16.207C28.4098 16.7581 28.7257 17.5056 28.7257 18.2849V30.7737C28.7257 30.9686 28.8047 31.1554 28.9453 31.2932C29.0859 31.431 29.2765 31.5084 29.4754 31.5084C29.6742 31.5084 29.8648 31.431 30.0054 31.2932C30.146 31.1554 30.225 30.9686 30.225 30.7737V28.5698C30.225 27.7905 30.5409 27.0431 31.1033 26.492C31.6656 25.9409 32.4283 25.6313 33.2236 25.6313C34.0188 25.6313 34.7815 25.9409 35.3438 26.492C35.9062 27.0431 36.2221 27.7905 36.2221 28.5698V32.243C36.2221 32.4379 36.3011 32.6247 36.4417 32.7625C36.5823 32.9003 36.7729 32.9777 36.9717 32.9777C37.1706 32.9777 37.3612 32.9003 37.5018 32.7625C37.6424 32.6247 37.7214 32.4379 37.7214 32.243V31.5084C37.7214 30.729 38.0373 29.9816 38.5996 29.4305C39.162 28.8794 39.9247 28.5698 40.7199 28.5698C41.5152 28.5698 42.2779 28.8794 42.8402 29.4305C43.4026 29.9816 43.7185 30.729 43.7185 31.5084V38.1201C43.7185 42.2818 42.311 45.1102 42.2979 45.1377C42.2538 45.2241 42.2275 45.3181 42.2205 45.4144C42.2135 45.5107 42.2259 45.6074 42.257 45.699C42.2882 45.7906 42.3375 45.8753 42.4021 45.9482C42.4666 46.0211 42.5452 46.0809 42.6334 46.124C42.7377 46.1746 42.8525 46.2009 42.9689 46.2011C43.1081 46.2012 43.2447 46.1633 43.3632 46.0916C43.4817 46.0199 43.5775 45.9173 43.6398 45.7952C43.7035 45.6685 45.2178 42.6491 45.2178 38.1201V31.5084C45.2178 30.3394 44.7439 29.2182 43.9004 28.3916C43.0569 27.565 41.9128 27.1006 40.7199 27.1006Z" fill="black"/>
        </svg>
      </button>
    </div>
    <div v-if="isModalOpen" class="modal-overlay" @click="closeModal">
      <div class="modal-content" @click.stop>
        <swiper
            :effect="'coverflow'"
            :grabCursor="true"
            :centeredSlides="true"
            :slidesPerView="'auto'"
            :coverflowEffect="{
        rotate: 35,
        stretch: 5,
        depth: 100,
        modifier: 1,
        slideShadows: true,
    }"
            :pagination="false"
            :modules="modules"
            class="mySwiper"
        >
          <swiper-slide>
            <nuxt-img loading="lazy" :src="sliderImageOne" class="rounded-[40px]" />
          </swiper-slide>
          <swiper-slide v-if="sliderImageTwo">
            <nuxt-img loading="lazy" :src="sliderImageTwo" class="rounded-[40px]" />
          </swiper-slide>
          <swiper-slide v-if="sliderImageThree">
            <nuxt-img loading="lazy" :src="sliderImageThree" class="rounded-[40px]" />
          </swiper-slide>
          <swiper-slide v-if="sliderImageFore">
            <nuxt-img loading="lazy" :src="sliderImageFore" class="rounded-[40px]" />
          </swiper-slide>
          <swiper-slide v-if="sliderImageFive">
            <nuxt-img loading="lazy" :src="sliderImageFive" class="rounded-[40px]" />
          </swiper-slide>
          <swiper-slide v-if="sliderImageSix">
            <nuxt-img loading="lazy" :src="sliderImageSix" class="rounded-[40px]" />
          </swiper-slide>

        </swiper>

      </div>
    </div>
  </div>
</template>
<script setup>
import { ref } from 'vue';
import Button from "~/components/Ui-elements/button.vue";

// Определение состояния модального окна
const isModalOpen = ref(false);

// Функция для открытия модального окна
function openModal() {
  console.log('Opening modal');
  isModalOpen.value = true;
}

// Функция для закрытия модального окна
function closeModal() {
  console.log('Closing modal');
  isModalOpen.value = false;
}

// Определение свойств компонента
const props = defineProps({
  image: String,
  num: String,
  preview: String,
  sliderImageOne: {
    type: String,
    required: true,
  },
  sliderImageTwo: {
    type: String,
    default: null, // значение по умолчанию
  },
  sliderImageThree: {
    type: String,
    default: null, // значение по умолчанию
  },
  sliderImageFore: {
    type: String,
    default: null, // значение по умолчанию
  },
  sliderImageFive: {
    type: String,
    default: null, // значение по умолчанию
  },
  sliderImageSix: {
    type: String,
    default: null, // значение по умолчанию
  },
});

</script>
<style lang="scss" scoped>
.swiper-slide{
  display: flex !important;
  justify-content: center !important;
}
@media screen and (max-width: 1440px) {
  .modal-overlay{
    & img{
      width: 420px;
    }
  }
}
@media screen and (max-width: 600px) {
  .modal-overlay{
    & img{
      width: 320px;
    }
  }
}
.modal-overlay {
  position: fixed;
  z-index: 10000;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
}
.modal-content {
  border-radius: 47px;
  border: 1px solid #FFF;
  background: rgba(24, 24, 24, 0.64);
  backdrop-filter: blur(11.649999618530273px);
  padding: 20px;
  max-width: 500px;
  width: 100%;
}
button{
  border-radius: 20px;
  background: rgba(72, 72, 72, 0.20);
  backdrop-filter: blur(35px);
}
.long{
  //width: 528px;
  height: 222px !important;
  & img{
    width: inherit;
  }
}
@media screen and (max-width: 1200px) {
  .asd{
    padding-top: 40px !important;
    padding-bottom: 40px !important;
  }
}
@media screen and (max-width: 520px) {
  .zxz{
    justify-content: space-between;
  }
  .rrr{
    justify-content: space-between !important;
  }
  .asd{
    padding-top: 10px !important;
  }
  .long{
    width: 528px;
    height: 222px !important;
  }
  .asa{
    width: 212px;
    height: 244px;
  }
  button{
    transform: translateY(50px);
    font-size: 14px !important;
    padding-left: 6px;
    text-align: start;
  }
}
@media screen and (max-width: 391px) {
  .asd{
    padding-top: 5px !important;
  }
}
</style>